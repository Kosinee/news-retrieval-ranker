# üß† News Retrieval & Ranking System (MLOps Project)

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–¶–µ–ª—å ‚Äî –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—É—é —Å–∏—Å—Ç–µ–º—É **–ø–æ–∏—Å–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–æ–≤–æ—Å—Ç–µ–π**,  
–∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç:
1. –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (retrieval);
2. –∏—Ö –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞—Ç—å (reranking);
3. –æ–±—É—á–∞—Ç—å—Å—è –≤ —Ä–µ–∂–∏–º–µ **continuous training** –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –ª–æ–≥–∞–º.

–û—Å–Ω–æ–≤–∞ –¥–∞–Ω–Ω—ã—Ö ‚Äî **[MIND Dataset (Microsoft News)](https://msnews.github.io/)**,  
–≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ–¥–µ—Ä–∂–∞—Ç—Å—è –æ–ø–∏—Å–∞–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–ª–∏–∫–∏ (impressions).

---

## üíº –ë–∏–∑–Ω–µ—Å-—Ü–µ–ª—å
–£–≤–µ–ª–∏—á–∏—Ç—å **CTR (Click-Through Rate)** –∏ **–≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**  
–∑–∞ —Å—á—ë—Ç –±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–π –≤—ã–¥–∞—á–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ.  
–¶–µ–ª—å:
- +10-15 % CTR uplift –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ baseline (BM25)

---

## üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1Ô∏è‚É£ Candidate Generators
| –ú–æ–¥–µ–ª—å | –¢–∏–ø | –¶–µ–ª—å | –õ–æ—Å—Å | –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ |
|--------|------|------|------|------------------|
| **BM25** | Keyword | –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–∞—è –±–ª–∏–∑–æ—Å—Ç—å | ‚Äî | Recall@K |
| **DSSM_sem** | Bi-encoder | —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –±–ª–∏–∑–æ—Å—Ç—å | `InfoNCE` | Recall@K |
| **DSSM_pref** | Bi-encoder | –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –∫–ª–∏–∫–∞–º | `TripletLoss` | Recall@K |

---

### 2Ô∏è‚É£ Reranker / Ranker
| –ú–æ–¥–µ–ª—å | –¢–∏–ø | –õ–æ—Å—Å | –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç | –ú–µ—Ç—Ä–∏–∫–∏ |
|--------|------|------|---------------|----------|
| **LightGBM LambdaMART** | Listwise Ranker | `LambdaMART Loss` | NDCG | NDCG@10, MRR, MAP |

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:**
- —Å–∫–æ—Ä—ã –æ—Ç BM25, DSSM_sem, DSSM_pref;  
- CTR –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ —Ñ–∏—á–∏);  
- –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ / –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ);  

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏

| –£—Ä–æ–≤–µ–Ω—å | –ú–µ—Ç—Ä–∏–∫–∏ | –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è | –¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è |
|----------|----------|---------------|------------------|
| **Retriever** | Recall@100, MRR@10 | –ø–æ–ª–Ω–æ—Ç–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö | Recall‚â•0.9 |
| **Ranker** | NDCG@10, MRR@10 | –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—Ä—è–¥–∫–∞ –≤ –≤—ã–¥–∞—á–µ | NDCG@10‚âà0.55 |
| **–ë–∏–∑–Ω–µ—Å** | CTR | –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | +10‚Äì15 % CTR uplift |
| **–°–µ—Ä–≤–∏—Å–Ω—ã–µ** | Latency | —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–∞–π–ø–ª–∞–π–Ω–∞ | ‚â§ 200 –º—Å |

---

## üß™ –ü–ª–∞–Ω —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

### üéØ –¶–µ–ª—å —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–≤—ã—Ö —Ä–µ—Ç—Ä–∏–≤–µ—Ä–æ–≤ (**DSSM_sem**, **DSSM_pref**)  
–∏ —Ä–∞–Ω–∂–∏—Ä–æ–≤—â–∏–∫–∞ (**LambdaMART**) —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç –∫–∞—á–µ—Å—Ç–≤–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –∏ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ (CTR).

---

### üß† –ì–∏–ø–æ—Ç–µ–∑–∞
> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (retriever ‚Üí reranker)  
> —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º –æ–±—É—á–µ–Ω–∏–µ–º –ø–æ–≤—ã—Å–∏—Ç **NDCG@10**  
> –∏ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ **—Ä–æ—Å—Ç—É CTR –Ω–∞ 10‚Äì15 %** –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å BM25 baseline.

---

### ‚öôÔ∏è –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω

| –≠—Ç–∞–ø | –¶–µ–ª—å | –ú–µ—Ç–æ–¥—ã / –ú–æ–¥–µ–ª–∏ | –ú–µ—Ç—Ä–∏–∫–∏ |
|------|------|------------------|----------|
| **1. Baseline** | –û—Ü–µ–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ BM25 | BM25 | Recall@100, NDCG@10 |
| **2. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π retriever** | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DSSM_sem –Ω–∞ embedding-–±–ª–∏–∑–æ—Å—Ç–∏ | DSSM_sem + InfoNCE | Recall@100, MRR@10 |
| **3. –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π retriever** | –£—á–µ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è | DSSM_pref + TripletLoss | Recall@100, MRR@10 |
| **4. Ensemble retrieval** | –û–±—ä–µ–¥–∏–Ω–∏—Ç—å BM25 + DSSM_sem + DSSM_pref | union(top-K) | Recall@100 |
| **5. Ranker (LTR)** | –£–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ | LightGBM LambdaMART | NDCG@10, MAP |
| **6. Business A/B test** | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ | production pipeline | CTR uplift |

---

### üß© –î–∏–∑–∞–π–Ω A/B-—Ç–µ—Å—Ç–∞

| –ì—Ä—É–ø–ø–∞ | –ú–æ–¥–µ–ª—å | –î–æ–ª—è —Ç—Ä–∞—Ñ–∏–∫–∞ | –ú–µ—Ç—Ä–∏–∫–∏ |
|---------|---------|----------------|----------|
| **Control** | BM25 baseline | 50% | CTR‚ÇÄ, NDCG‚ÇÄ |
| **Treatment** | DSSM + LambdaMART | 50% | CTR‚ÇÅ, NDCG‚ÇÅ |

**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 1 –Ω–µ–¥–µ–ª—è  
**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:**  
\[
CTR_{uplift} = \frac{CTR_1 - CTR_0}{CTR_0} \ge 10\%, \quad p < 0.05
\]

---

### üßÆ –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ offline-–æ—Ü–µ–Ω–∫–∏
1. –†–∞–∑–¥–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ MIND –ø–æ –Ω–µ–¥–µ–ª—è–º (train / valid / test).  
2. –ù–∞ `train` –æ–±—É—á–∏—Ç—å retrievers –∏ ranker.  
3. –ù–∞ `valid` ‚Äî –ø–æ–¥–æ–±—Ä–∞—Ç—å –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã (embedding size, margin, num_leaves).  
4. –ù–∞ `test` ‚Äî —Å—Ä–∞–≤–Ω–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏:
   - **BM25 ‚Üí DSSM ‚Üí DSSM+LTR**.
5. –°—Ä–∞–≤–Ω–∏—Ç—å `NDCG@10`, `Recall@100`, `MRR@10` –∏ –≤—ã—á–∏—Å–ª–∏—Ç—å –¥–µ–ª—å—Ç—ã —É–ª—É—á—à–µ–Ω–∏–π.

---

### üìà –ü—Ä–∏–º–µ—Ä –æ–∂–∏–¥–∞–µ–º—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

| –ú–æ–¥–µ–ª—å | Recall@100 | NDCG@10 | CTR (A/B uplift) |
|---------|-------------|----------|------------------|
| BM25 | 0.85 | 0.48 | ‚Äî |
| DSSM_sem | 0.89 | 0.51 | ‚Äî |
| DSSM_pref | 0.92 | 0.53 | ‚Äî |
| DSSM + LambdaMART | 0.94 | 0.56 | +12 % |

---

### üìò –ê–Ω–∞–ª–∏–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ **K** (—á–∏—Å–ª–æ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤) –Ω–∞ –∏—Ç–æ–≥–æ–≤—ã–π Recall/NDCG.  
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ **–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è DSSM (continuous training)** –Ω–∞ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é –º–µ—Ç—Ä–∏–∫.  
- –ó–∞–º–µ—Ä–∏—Ç—å latency inference –¥–ª—è retriever + reranker (<200ms).  

---

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:** NDCG@10 ‚â• 0.55, Recall@100 ‚â• 0.9.  
- **–ë–∏–∑–Ω–µ—Å:** CTR uplift ‚â• +10 %, p-value < 0.05.  
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ:** latency ‚â§ 200 –º—Å, –æ–±—É—á–µ–Ω–∏–µ retriever ‚â§ 2 —á–∞—Å–∞.  

---


