# üß† News Retrieval & Ranking System (MLOps Project)

---

## üéØ –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞—Ç—å –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç—É—é —Å–∏—Å—Ç–µ–º—É **–ø–æ–∏—Å–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–æ–≤–æ—Å—Ç–µ–π**, –∫–æ—Ç–æ—Ä–∞—è:
1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ (retrieval);
2. –ü–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–µ—Ç –∏—Ö –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (reranking);
3. –°–∞–º–æ–æ–±—É—á–∞–µ—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ **continuous training** –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ª–æ–≥–∞—Ö.

–û—Å–Ω–æ–≤–Ω–∞—è **–±–∏–∑–Ω–µ—Å-—Ü–µ–ª—å** ‚Äî —É–≤–µ–ª–∏—á–∏—Ç—å:
- **CTR (Click-Through Rate)** –Ω–∞ 10‚Äì15 % –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ baseline (BM25);
- **–≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** –∑–∞ —Å—á—ë—Ç –±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

---

## üìö –û–ø–∏—Å–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

### üì¶ –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—ã–π –¥–∞—Ç–∞—Å–µ—Ç **[MIND Dataset (Microsoft News)](https://msnews.github.io/)**,  
—Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Ä–µ–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ª–æ–≥–∏ –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ **Microsoft News**.

**–ü–µ—Ä–∏–æ–¥ —Å–±–æ—Ä–∞:** 6 –Ω–µ–¥–µ–ª—å (–æ–∫—Ç—è–±—Ä—å‚Äì–Ω–æ—è–±—Ä—å 2019)  
**–û–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö:**
- 1 000 000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
- 161 013 –Ω–æ–≤–æ—Å—Ç–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π;
- 15 777 377 –∏–º–ø—Ä–µ—Å—Å–∏–π (–ø–æ–∫–∞–∑–æ–≤ –Ω–æ–≤–æ—Å—Ç–µ–π);
- 24 155 470 –∫–ª–∏–∫–æ–≤.

---

### üßæ –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

| –ü–æ–ª–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----------|
| `user_id` | –ê–Ω–æ–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `time` | –í—Ä–µ–º—è –∏–º–ø—Ä–µ—Å—Å–∏–∏ (–ø–æ–∫–∞–∑–∞ –±–ª–æ–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π) |
| `click_history` | –°–ø–∏—Å–æ–∫ ID –Ω–æ–≤–æ—Å—Ç–µ–π, —Ä–∞–Ω–µ–µ –∫–ª–∏–∫–Ω—É—Ç—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º |
| `impression_log` | –°–ø–∏—Å–æ–∫ `(news_id, label)`, –≥–¥–µ label = 1 (click) –∏–ª–∏ 0 (no click) |
| `news_id` | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –Ω–æ–≤–æ—Å—Ç–∏ |
| `title`, `abstract`, `body` | –¢–µ–∫—Å—Ç–æ–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–∞—Ç—å–∏ |
| `category` | –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–æ–≤–æ—Å—Ç–∏ |
| `entities` | –°—É—â–Ω–æ—Å—Ç–∏, –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ –∏–∑ —Ç–µ–∫—Å—Ç–∞ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—Ç–∞—Ç–µ–π (WikiData) |

---

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|-----------|-----------|
| –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ | 11.5 —Å–ª–æ–≤ |
| –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ | 43 —Å–ª–æ–≤–∞ |
| –°—Ä–µ–¥–Ω—è—è –¥–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–∞ | 585 —Å–ª–æ–≤ |
| –ö–æ–ª-–≤–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π | 20 |
| –°—Ä–µ–¥–Ω–µ–µ —á–∏—Å–ª–æ –∫–ª–∏–∫–æ–≤ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | 24 |

üìò –û—Å–Ω–æ–≤–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å: –¥–∞–Ω–Ω—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç **–∏ —Ç–µ–∫—Å—Ç–æ–≤—É—é, –∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é**,  
—á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—É—á–∞—Ç—å –∫–∞–∫ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ (retrievers), —Ç–∞–∫ –∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ (LTR).

---

## üß™ –û–ø–∏—Å–∞–Ω–∏–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

### üß† –ì–∏–ø–æ—Ç–µ–∑–∞

> –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–Ω–æ–≥–æ—Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã  
> (retriever ‚Üí reranker) —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º –∏ –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º –æ–±—É—á–µ–Ω–∏–µ–º  
> —É–ª—É—á—à–∏—Ç **NDCG@10** –∏ –ø–æ–≤—ã—Å–∏—Ç **CTR** –Ω–∞ 10‚Äì15 %  
> –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å baseline (BM25).

---

### ‚öôÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã


---

### üß© –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

#### 1Ô∏è‚É£ Candidate Generators (Retriever)
| –ú–æ–¥–µ–ª—å | –¢–∏–ø | –¶–µ–ª—å | –õ–æ—Å—Å | –ú–µ—Ç—Ä–∏–∫–∏ |
|--------|------|------|------|----------|
| **BM25** | Keyword | –±–∞–∑–æ–≤–∞—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–∞—è –º–æ–¥–µ–ª—å | ‚Äî | Recall@K |
| **DSSM_sem** | Bi-encoder | —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –±–ª–∏–∑–æ—Å—Ç—å | `InfoNCE` | Recall@K, MRR@10 |
| **DSSM_pref** | Bi-encoder | –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∞—è –±–ª–∏–∑–æ—Å—Ç—å (–ø–æ –∫–ª–∏–∫–∞–º) | `TripletLoss` | Recall@K, MRR@10 |

#### 2Ô∏è‚É£ –†–∞–Ω–∂–∏—Ä–æ–≤—â–∏–∫ (Ranker)
| –ú–æ–¥–µ–ª—å | –¢–∏–ø | –õ–æ—Å—Å | –¶–µ–ª—å | –ú–µ—Ç—Ä–∏–∫–∏ |
|--------|------|------|------|----------|
| **LightGBM LambdaMART** | Listwise Ranker | `LambdaMART Loss` | –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è NDCG | NDCG@10, MAP, MRR |

**–§–∏—á–∏ –¥–ª—è LTR:**
- —Å–∫–æ—Ä—ã retrievers (BM25, DSSM_sem, DSSM_pref);
- CTR –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º (–ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–µ);
- –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –∏—Å—Ç–æ—á–Ω–∏–∫ (–∫–∞—Ç–µ–≥–æ—Ä–∏–∞–ª—å–Ω—ã–µ);
- –∏–Ω—Ç–µ—Ä–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `score_sem * score_pref`).

---

### üìä –ú–µ—Ç—Ä–∏–∫–∏

| –£—Ä–æ–≤–µ–Ω—å | –ú–µ—Ç—Ä–∏–∫–∏ | –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è | –¶–µ–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|----------------|------------------|
| **Retriever** | Recall@100, MRR@10 | –ø–æ–ª–Ω–æ—Ç–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ | Recall ‚â• 0.9 |
| **Ranker** | NDCG@10, MAP | –∫–∞—á–µ—Å—Ç–≤–æ –ø–æ—Ä—è–¥–∫–∞ –≤ –≤—ã–¥–∞—á–µ | NDCG@10 ‚âà 0.55 |
| **–ë–∏–∑–Ω–µ—Å** | CTR uplift | –≤–æ–≤–ª–µ—á—ë–Ω–Ω–æ—Å—Ç—å | +10‚Äì15 % |
| **–°–µ—Ä–≤–∏—Å–Ω—ã–µ** | Latency P95 | –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚â§ 200 –º—Å |

---

### üî¨ –î–∏–∑–∞–π–Ω —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞

| –≠—Ç–∞–ø | –¶–µ–ª—å | –ú–æ–¥–µ–ª—å / –ú–µ—Ç–æ–¥ | –ú–µ—Ç—Ä–∏–∫–∏ |
|------|------|----------------|----------|
| **1. Baseline** | –û—Ü–µ–Ω–∏—Ç—å BM25 | BM25 | Recall@100, NDCG@10 |
| **2. –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π retriever** | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DSSM_sem | DSSM + InfoNCE | Recall@100, MRR@10 |
| **3. –ü–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–π retriever** | –£—á–µ—Å—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è | DSSM_pref + TripletLoss | Recall@100, MRR@10 |
| **4. Ensemble retrieval** | –û–±—ä–µ–¥–∏–Ω–∏—Ç—å retrievers | Union(top-K) | Recall@100 |
| **5. Ranker (LTR)** | –£–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤ | LightGBM LambdaMART | NDCG@10, MAP |
| **6. A/B Test** | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ | Production pipeline | CTR uplift |

---

### ‚öñÔ∏è A/B-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ì—Ä—É–ø–ø–∞ | –ú–æ–¥–µ–ª—å | –¢—Ä–∞—Ñ–∏–∫ | –ú–µ—Ç—Ä–∏–∫–∏ |
|---------|---------|--------|----------|
| **Control** | BM25 baseline | 50 % | CTR‚ÇÄ, NDCG‚ÇÄ |
| **Treatment** | DSSM + LambdaMART | 50 % | CTR‚ÇÅ, NDCG‚ÇÅ |

**–ö—Ä–∏—Ç–µ—Ä–∏–π —É—Å–ø–µ—Ö–∞:**
\[
CTR_{uplift} = \frac{CTR_1 - CTR_0}{CTR_0} \ge 10\%, \quad p < 0.05
\]

---

### üßÆ Offline-–ø—Ä–æ—Ü–µ–¥—É—Ä–∞
1. –†–∞–∑–¥–µ–ª–∏—Ç—å MIND –Ω–∞ train / validation / test (–ø–æ –Ω–µ–¥–µ–ª—è–º).  
2. –û–±—É—á–∏—Ç—å retrievers –Ω–∞ train, ranker ‚Äî –Ω–∞ validation.  
3. –ù–∞ test ‚Äî –∏–∑–º–µ—Ä–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (Recall, NDCG, CTR).  
4. –°—Ä–∞–≤–Ω–∏—Ç—å —Å baseline BM25.  
5. –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–∏—è –∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–ø–æ K –∏ —Ñ–∏—á–∞–º).

---

### üìà –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

| –ú–æ–¥–µ–ª—å | Recall@100 | NDCG@10 | CTR uplift |
|---------|-------------|----------|-------------|
| BM25 | 0.85 | 0.48 | ‚Äî |
| DSSM_sem | 0.89 | 0.51 | ‚Äî |
| DSSM_pref | 0.92 | 0.53 | ‚Äî |
| DSSM + LambdaMART | 0.94 | 0.56 | +12 % |

---

### ‚úÖ –ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏
- **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ:** NDCG@10 ‚â• 0.55, Recall@100 ‚â• 0.9  
- **–ë–∏–∑–Ω–µ—Å:** CTR uplift ‚â• +10 %, p-value < 0.05  
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ:** latency ‚â§ 200 –º—Å, retraining ‚â§ 2 —á  

---

## üîÅ Continuous Training Pipeline

1. **–°–±–æ—Ä –ª–æ–≥–æ–≤** (–Ω–æ–≤—ã–µ –∏–º–ø—Ä–µ—Å—Å–∏–∏ –∏ –∫–ª–∏–∫–∏).  
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∏—á–µ–π** (feature engineering job).  
3. **–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ retrievers –∏ ranker.**  
4. **–û—Ü–µ–Ω–∫–∞ –º–µ—Ç—Ä–∏–∫** (auto-eval job).  
5. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –ø—Ä–∏ —É–ª—É—á—à–µ–Ω–∏–∏ NDCG@10 > threshold.  

---

## üß© –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **PyTorch** ‚Äî DSSM retrievers  
- **LightGBM** ‚Äî LambdaMART ranker  
- **MLflow / Airflow** ‚Äî Continuous training & evaluation  
- **Docker / FastAPI** ‚Äî inference-—Å–µ—Ä–≤–∏—Å  
- **Pandas / PySpark** ‚Äî feature pipelines  

---

## üìò –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞
- *Burges et al., "From RankNet to LambdaMART: The LambdaRank Framework"*  
- *Wu et al., "Neural News Recommendation with Multi-Head Self-Attention (NRMS)"*  
- *Microsoft MIND Dataset (2019)*  
- *LightGBM Documentation ‚Äì Lambdarank Objective*  
- *Recommenders by Microsoft (GitHub)*  

---

‚úçÔ∏è **–ê–≤—Ç–æ—Ä:** –¢–≤–æ—ë –∏–º—è  
üìß your.email@example.com  
üíº [GitHub / LinkedIn / Kaggle]

---
